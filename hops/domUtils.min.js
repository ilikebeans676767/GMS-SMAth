class NotificationManager{static#t=null;static LOCKED_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAUCAYAAABSx2cSAAAACXBIWXMAAAHxAAAB8QGeuW1nAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAA50RVh0VGl0bGUARlNNIEljb26t/l/gAAAAFnRFWHRBdXRob3IAQW5nZWwgSGVybmFuZGV6+PBx7AAAAtdJREFUOI1tUktIVGEU/s69/73zyDBDQysVvTM5OqYLrSF70dMoWli0aRHRw0WLHouIFlFt2xW0iV66adODICiihUnRojaFQ5oXs8QIotTKe8d77/+fFuOMM9oHBw7nfN85h+//iZlRiLp4Y6cpVHdzpbGpNEJLplyeTH8PXnoB3RgZ/vi8kEs5cWVr66IyL9PbvT6y79i6cBA1SeRIjsfBzTcz4sZr9/6EGTr8/f376byYiPRkMvH09sGSLW3VQgCA/UN6YxPKqFmq+Va5bgLA26+BPHbv74t0enAPM0sBAHVW4uj5HZHtbdWCfk4r/+xjJ+i3g6sMtgmIb46bJ6/sjRhraoQ4ty2y88JMw2EAt8DM2NDeOOT1pJTXk1L7tyR/W1YyxszIhWUlYwe2Jv94PSk1czelOtqbPjIztFgstixVK1ZpRNRvB/xuzL9k2wN2oTG2PWC/+yIvvxoJWNeIUrUiEY/HK4RPVF5eogEAxiaUBtJGa2tbyjAPFMLnL7+UBgtYVkLwgAoBpVW5ftbxlhU67240HswXZmGgZbnOYJDrMYj1StrY3vjh2YnSppCAnufxbKhcTnO5AmYCyM47k2kRK9ebQwyCV0xYMEBRvhZS0ONL9NWCFAgOLSB8+y39t+OBsbZK+MujujE3KMshRSQgCeRQ0abhSRXsfzL1+q+nrpWYdOZhZ9m62GJdFA2QgAYJwCXAmQ2X0DfiCSeQF0ftoUfTPl3oG/VFYR8OCsT5YjbWl5oyTPppItIiGk5tWGzKogVOdrPIiwvObjIM/Uh1tOs6J44fWRntSggju23WPGKAJM2K3YVOh7PmdYQlgdwCM3M8CQiSBHKKnYQCdkXDXFcjDjWYguEQze9DAoIlss15T2EpgyzDABQImYX/jQHW7Iw/nHEgkSHAI8AHEBSc9x+4CvKT73+i+vpVa1aGRW+TYTRoAP2fPgcFcNr3B8cz8tA/hu9sL/mtymQAAAAASUVORK5CYII=";static UNLOCKED_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAUCAYAAABSx2cSAAAACXBIWXMAAAHxAAAB8QGeuW1nAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAA50RVh0VGl0bGUARlNNIEljb26t/l/gAAAAFnRFWHRBdXRob3IAQW5nZWwgSGVybmFuZGV6+PBx7AAAArxJREFUOI2Fkk1IVFEUx//nvTvzcsYyPyaSGtJ5b/zIClrIWJR9bKJWWQSupAJpE1nhvlYFLdtV1CIIso9NEEEr+3DTqoJSVEqRQCjHr3mj894797QYp96o0YEL997z+597//dcEhGEozHdesyw6IJq295JmyqqZH5pzv/64w0K+u63seHXYZZK4nQ6bbFlPYr3dp6Onz8QUCyqSpDkvcB98F65994+y5vm2elPn1wAMEKFEqq1/kS896CmWFTx1JxXeDOqg28/PYpFVeXFo6i+f64rRnhORGbZyQCQamrqjGacV1AmCu/H75DoYSGyrc7mS1U3T0WM2rjKP/4g89df9E6MjdyHiJSNpOPYDQ1tW8N7tt3mNHUfW8x4T3SmMKBThzLDIoI14n+NRrulf+/gDe4Inkprf7c4jpNQIc9IJpMVhlG9AesEWfjOkzMGDqRhJDbCAxLKtpvb4WwZiOyoSVaezKj1hKWI7N4mEE2SXwaJuZXswx2fEy/7dsJS5h9KNERrQBjQGqJ5Za+4RsHjmTMPvyjTrtsl5JMsL4eAEBwWCReLajbNHRt3K7BPnMtCpBzQ0wu+/3E6ovbU+UatFRHRxaJaQ4QhHJAS9sFuFtCMEqAnF4LFq++GdN6/bcTUlfit9n1G/QZVyotmCHtQEvjgXBYIJbyhKYVl79rE+OjbxnRr1huaGowcry1duWgl8GEIe9BuFpzLgt0s2J0FOcSizMtEZCCCPtjCnMsWuRW27OQyTzVsmkcquhqCll7jkNWFzYtgt5RfsRcwlLC34ln/fTTNxblgv8gS2F1c0zLhGBQCH5ybXdVThqQgdJJ6UOcL5zxa3TIECkoCT7S7QGt6ajHJdg2IJiyt810BUfiFMZ6fs6HEXIusHxIYTLORcUqlmtq52n9ItV6zGKD/CUlDZCY6Ys5Ge34DhHcBgPWbbTgAAAAASUVORK5CYII=";static FILE_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAATCAYAAACZZ43PAAAACXBIWXMAAAHxAAAB8QGeuW1nAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAA50RVh0VGl0bGUARlNNIEljb26t/l/gAAAAFnRFWHRBdXRob3IAQW5nZWwgSGVybmFuZGV6+PBx7AAAAZlJREFUOI2Fk79qG0EQh7/dW51SJDaGkEI4hQIRUjAhKdIEZOPW6Ww/gVsrkCqvkDYEUvkd0rk3bh1IaUWFDQLZjbEVIsWcdLuT4u6k+yOdF45jbuY3883snHrf3B68qbyuUXIEsMrx8/6MW4Y/Lnvne4nPbJhXte9rX5eKAyMEnnCn//Lt+gvPvfXdeqN5fNnrfgAwy4RTLxJOPCEwwlg5AD496VDR/s6LRvP0otfdLCSwGgLPReK4emCEMQ6rheEjy/7jA/5VVbv+snUySyCKKNgTJsbNhEmiqfbpSZ/Dmw5Og1OwWn26ZYAIM1cx8FzO1nx8d5RJ/OfXZ4zVwtgvVozsYivpuYRKMKGGkb8kMCbJC5OYUIMJSwkSocsIk0RWC8aWEWQqugUEkhDI7OrSFYq2y9ihBmMVjCqJYzHq3M767ZzAlaIubMVLDXHkp9EeaCUVMxtiliCHWnK98R7kCRJhfhOLiWxmDxZWXL5gUy2I4oE9yG9i/E4f1XzbHqw8a9WcAqfBKsEp4kewCpyOvknu15f+76v/MbXwzGymDxEAAAAASUVORK5CYII=";static QUESTIONMARK_ICON="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAUCAYAAAC58NwRAAAACXBIWXMAAAHxAAAB8QGeuW1nAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAA50RVh0VGl0bGUARlNNIEljb26t/l/gAAAAFnRFWHRBdXRob3IAQW5nZWwgSGVybmFuZGV6+PBx7AAAAjFJREFUKJF9kctLlFEYxn/nzPc1842jyVyaAa+Yi0wpWoRdREhIyEXLIFrkuj+mIAKXEa6qhdWmGwiBCkoXCVIaUdIIZxp0hrk4NXO+723haOMovnAWh/N7zvs876sidmQwfiL+OGbHmhWKo0oQMtVMMV1J31X9Tf1LCxcW+oI6eCS8VyW3xODi4JIVs2Oh42BRYLSgbYewP9ZsNQJF2eFXdROjhWgggW07GJ9Q1VDVggVQ8QlVLWS8ba7PD626ypsB8Gk99HT4w+mgvxWjwfWBNhqyjkvWcflsltnxypNrxeT4WjE5XnTLk4uVZbKOR9ZxMUqwqlrYdlyMhnzZxdP/7Xka8v7dz4zedWFtu9vFt7l3iNbMbr4u5P/mPiqlBoBELNQxYoXjdQJQQG+rExkDS/+tlDZOhmK3znZeG2mL9jW1x88FOtsuaqMF4xPuPxldUyKyb0Ep1XN54M7s7bGHCaMFo2Hj91fSuVX5vvI+s/Fz/lHjWBMtp3qcbC3T6vqMefX83otiIfUM+CYiS4f2ULY9soGaIPWpVCykHojI3N77YYElZB0Po4U/tndo842CleTiVC6vyq6HkPrypgAk64EDoWvBo0BX7fpDRLaO64CvNTLsC7bcBHAL+ZfA1AFARPYP0Bm6NJrunpiW7olpCV25kQHO1DO6oUF7oPe83453YMc7CPQM2EC4HmgUeIK3H0rEFeDAqBo33WQnuuasaCIMYLZSW9XN9asiUtpj/gGZzQ/jKAdkiAAAAABJRU5ErkJggg==";static NG_DEFAULT="https://img.ngfiles.com/wiki/uploads/968000/iu_968880_1.gif";static get instance(){return null==this.#t&&(this.#t=new NotificationManager),this.#t}constructor(){this.notificationContainer=null,this.notifications=[],this.icons={},this.notificationColors={medalunlock:{background:"#ff7f00",text:"#242424"},secretmedalunlock:{background:"#2bc455",text:"#242424"},savegame:{background:"#242424",text:"#ff3effff"},session:{background:"#242424",text:"#fd633eff"}},this.createNotificationStyles(),this.createNotificationContainer()}createNotificationStyles(){var t;document.getElementById("notification-styles")||((t=document.createElement("style")).id="notification-styles",t.innerHTML=`
            .notification-container { position: fixed; top: 10px; right: 10px; display: flex; flex-direction: column; gap: 10px;z-index: 9999;}
            .notification { display: flex; flex-direction: column; border-radius: 8px; padding: 0; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); opacity: 0; transform: translateY(-20px); transition: opacity 0.3s, transform 0.3s; width: 250px; font-family: Arial, sans-serif; font-weight:bold; }
            .notification.show {opacity: 1;transform: translateY(0);}
            .notification img {width: auto;height: 24px;}
            .notification .notification-header {padding: 2px 6px; font-size: 8px; font-weight: bold; color: white; border-top-left-radius: 8px; border-top-right-radius: 8px;}
            .notification .notification-body { display: flex; align-items: center; padding: 6px; gap: 10px; border-bottom-left-radius: 8px; border-bottom-right-radius: 8px;}
            .notification .notification-body span { flex-grow: 1; font-size: 10px;}
            @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-10px); } 50% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); }}
            .shake {animation: shake 0.5s ease;}
        `,document.head.appendChild(t))}createNotificationContainer(){this.notificationContainer||(this.notificationContainer=document.createElement("div"),this.notificationContainer.classList.add("notification-container"),document.body.appendChild(this.notificationContainer))}replaceTokens(t,e){return t.replace(/{(.*?)}/g,(t,o)=>e[o]||"")}showNotification(t){var o=t.title,e=t.message,i=t.tokens;let n=t.type;var a=t.duration,t=t.imageURL;let r=document.createElement("div");r.classList.add("notification");var s=this.notificationColors[n]||this.notificationColors.info,d=document.createElement("div"),o=(d.classList.add("notification-header"),d.style.backgroundColor=s.text,d.textContent=o,r.appendChild(d),document.createElement("div")),d=(o.classList.add("notification-body"),o.style.backgroundColor=s.background,o.style.color=s.text,document.createElement("img"));void 0!==t&&""!=t?d.src=t:this.icons.hasOwnProperty(n)?d.src=this.icons[n]||this.icons.info:d.src=NotificationManager.NG_DEFAULT,o.appendChild(d);let c=e;i.hasOwnProperty("refname")&&(c+="<br><strong>Invalid Name: {refname}</strong>"),i.hasOwnProperty("obj")&&(c+="<br><strong>Object:</strong>{obj}<br><strong>Comp.Name:</strong> '{name}'<br><strong>UID: </strong>{uid}");s=this.replaceTokens(c,i),t=document.createElement("span");t.innerHTML=s,o.appendChild(t),r.appendChild(o),this.notificationContainer.appendChild(r),this.notifications.push(r),setTimeout(()=>{r.classList.add("show"),"secretmedalunlock"===n&&setTimeout(()=>{r.classList.add("shake")},300)},10),this.notificationContainer.scrollHeight>window.innerHeight&&this.notifications.shift().remove(),setTimeout(()=>{r.classList.remove("show"),setTimeout(()=>{r.remove()},300)},a)}}class DOMUtils{static get isModalOpen(){return this.#o}static#o=!1;static displayTableModal(t,o,e){this.#o=!0;let d=document.createElement("div");d.classList.add("modal");var i=document.createElement("div"),n=(i.classList.add("modal-content"),d.appendChild(i),document.createElement("div")),a=(n.classList.add("modal-header"),i.appendChild(n),document.createElement("img")),r=document.querySelector("link[rel='icon'], link[rel='shortcut icon']"),r=(a.src=r?r.href:"https://img.ngfiles.com/wiki/uploads/968000/iu_968880_1.gif",a.classList.add("modal-img"),document.createElement("h1")),t=(r.textContent=t,n.appendChild(a),n.appendChild(r),document.createElement("button")),a=(t.classList.add("close-btn"),t.textContent="X",t.addEventListener("click",()=>{this.#o=!1,document.body.removeChild(d),document.body.style.pointerEvents="auto",window.dispatchEvent(new CustomEvent("c3resume-runtime",{}))}),n.appendChild(t),document.createElement("div")),r=(a.classList.add("table-container"),i.appendChild(a),document.createElement("table")),n=(r.classList.add("modal-table"),a.appendChild(r),document.createElement("thead"));let s=document.createElement("tr"),c=(o.forEach(t=>{var o=document.createElement("th");o.textContent=t,s.appendChild(o)}),n.appendChild(s),r.appendChild(n),document.createElement("tbody"));e.forEach((s,t)=>{let o=document.createElement("tr");o.classList.add(t%2==0?"even-row":"odd-row"),Object.keys(s).forEach(t=>{var e=document.createElement("td"),i=s[t];if("string"==typeof i)switch(i.substring(0,4)){case"img:":var n=i.substring(4),a=document.createElement("img");a.src=n,a.classList.add("img-cell"),e.className="ng-icon",e.appendChild(a);break;case"btn:":var r=document.createElement("button");let o=i.substring(4).split(",");for(let t=0;t<o.length;t++)0===t&&(r.innerText=o[0],r.onclick=()=>{o.includes("ng-close")&&(document.body.removeChild(d),this.#o=!1),window.dispatchEvent(new CustomEvent("ng-action",{detail:{action:o[0],data:s}}))});r.classList.add("ng-action"),e.className="ng-icon",e.appendChild(r);break;default:e.textContent=i,e.className="ng-textData"}else e.textContent="number"==typeof i?i:i||"",e.className="ng-textData";o.appendChild(e)}),c.appendChild(o)}),r.appendChild(c),document.body.appendChild(d),document.body.style.pointerEvents="none";t=document.createElement("style");t.innerHTML=`
            .modal {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background-color: rgba(0, 0, 0, 0.5);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                pointer-events: auto; /* Permite interacciÃ³n con el modal */
            }
            .modal-content {
                background-color: #333;
                padding: 10px;
                border-radius: 8px;
                width: 80%;
                height: 100%;
                max-width: 80%;
                max-height: 90vh;
                overflow-y: clip;
                position: relative;                
                box-shadow: 8px 8px 10px rgba(0, 0, 0, 0.5);
                opacity: 0.95;
            }
            .table-container {
                overflow-y: scroll;
                position: relative;
                max-height: 90%;
                padding: 0px 0px 0px 0px;
            }
            .modal-header {
                display: flex;
                background-color: #ff7f00;
                color: #333;
                padding: 5px;
                border-radius: 8px 8px 0 0;
                text-align: center;
                max-height: 10%;
                position: sticky; 
                top: 0; 
                z-index: 1; 
            }
            .modal-img {
                border-radius: 6px;
                width: auto;
                height: auto;
                max-height: 50px;
                object-fit: contain;
                filter: drop-shadow(4px 4px 5px rgba(0, 0, 0, 0.5)); 
            }
            .modal-header h1 {
                margin-left: 10px;
                font-family: sans-serif;
                font-size: 14pt;
                font-weight: bold;
                color: rgb(36, 36, 36);
            }
            .close-btn {
                position: absolute;
                top: 10px;
                right: 10px;
                padding: 5px 10px;
                cursor: pointer;
                background-color: rgb(36, 36, 36);
                color: rgb(244, 152, 66);
                font-weight: bold;
                border: none;
                border-radius: 15%;
                font-size: 16px;
            }
            .close-btn:hover {
                position: absolute;
                top: 10px;
                right: 10px;
                padding: 5px 10px;
                cursor: pointer;
                background-color: rgb(122, 244, 66);
                color: rgb(36,36,36);
                font-weight: bold;
                border: 2pt;
                border-radius: 15%;
                font-size: 16px;
            }
            .ng-action {
                cursor: pointer;
                text-align:center;
                background-color: rgb(204, 88, 189);
                color: rgb(36,36,36);
                font-weight: bold;
                border: none;
                border-radius: 4px;
                display: inline-block;
                width:80%;
                font-size: 12px;
                box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.5);
            }
            .ng-action:hover {
                cursor: pointer;
                text-align:center;
                background-color: rgb(122, 244, 66);
                color: rgb(36,36,36);
                font-weight: bold;
                border: none;
                border-radius: 4px;
                display: inline-block;
                width:80%;
                font-size: 12px;
                box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.5);
            }
            .modal-table {
                width: 100%;
                border-collapse: collapse;                
            }
            .modal-table th {
                background-color:rgb(36, 36, 36);
                color:rgb(244, 152, 66);
                padding: 10px;
                text-align: left;
                font-weight: bold;
                font-family: sans-serif;
                font-size: 8pt;
                position: sticky; 
                top: 0; 
                z-index: 1; 
            }
            .ng-icon {
                padding: 8px;
                text-align: center;
                border: 1px solid #444;
                font-family: sans-serif;
                font-size:10pt;
                object-fit: contain;
                widht:auto;
                height:auto;
            }
            .ng-textData {
                padding: 8px;
                text-align: left;
                border: 1px solid #444;
                font-family: sans-serif;
                font-size:10pt;                
            }
            .even-row {
                background-color: #444;
                color: #f4c542;
            }
            .odd-row {
                background-color: #555;
                color: #f4c542;
            }
            .img-cell {
                width: auto; 
                max-height: 50px;
                object-fit: contain;
                justify-content: center;
                align-items: center; 
            }
            .table-container::-webkit-scrollbar {
                width: 10px;  
            }
            .table-container::-webkit-scrollbar-track {
                background-color: #333;
                border-radius: 10px; 
            }
            .table-container::-webkit-scrollbar-thumb {
                background-color: #555;
                border-radius: 10px; 
                border: 2px solid #333; 
            }
            .table-container::-webkit-scrollbar-thumb:hover {
                background-color: #777; 
            }
        `,document.head.appendChild(t)}static convertImageToBase64(t){return new Promise((e,i)=>{fetch(t).then(t=>t.blob()).then(t=>{let o=new FileReader;o.onloadend=function(){e(o.result)},o.onerror=t=>{i(t)},o.readAsDataURL(t)}).catch(t=>{i("Error when converting the image to Base64: "+t)})})}static convertMultipleImagesToBase64(t){t=t.map(t=>DOMUtils.convertImageToBase64(t));return Promise.all(t)}}